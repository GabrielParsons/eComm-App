{% extends 'Supadupastore/base.html' %}

{% block title %}Add Review - Supadupastore{% endblock %}

{% block content %}
<h1>Write a Review for {{ product.name }}</h1>

{% if existing_review %}
    <p class="success">You already reviewed this product. Update your review below:</p>
{% endif %}

<form method="POST">
    {% csrf_token %}
    
    <label for="rating">Rating (1-5):</label>
    <select id="rating" name="rating" required>
        <option value="5" {% if existing_review and existing_review.rating == 5 %}selected{% endif %}>5 - Excellent</option>
        <option value="4" {% if existing_review and existing_review.rating == 4 %}selected{% endif %}>4 - Good</option>
        <option value="3" {% if existing_review and existing_review.rating == 3 %}selected{% endif %}>3 - Average</option>
        <option value="2" {% if existing_review and existing_review.rating == 2 %}selected{% endif %}>2 - Poor</option>
        <option value="1" {% if existing_review and existing_review.rating == 1 %}selected{% endif %}>1 - Terrible</option>
    </select>
    
    <label for="comment">Your Review:</label>
    <textarea id="comment" name="comment" rows="5" required>{% if existing_review %}{{ existing_review.comment }}{% endif %}</textarea>
    
    <p style="font-size: 0.9em; color: gray;">
        Note: Your review will be marked as "Verified" if you have purchased this product, otherwise it will be "Unverified".
    </p>
    
    <button type="submit">{% if existing_review %}Update Review{% else %}Submit Review{% endif %}</button>
    <a href="{% url 'Supadupastore:product_detail' product.id %}" style="margin-left: 10px;">Cancel</a>
</form>
{% endblock %}
